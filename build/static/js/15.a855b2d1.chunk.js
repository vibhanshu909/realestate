(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{694:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a.n(n),l=a(41),i=a(21),c=a(32),o=a(22),u=a(56),s=a.n(u),d=a(25),b=a(249),m=a.n(b),p=a(0),y=a.n(p),f=a(17),g=a(24),v=a(19),h=a(18),E=a(20),j=a(36),O=a.n(j),P=a(83),w=a.n(P),S=a(66),C=a.n(S),x=a(70),k=a.n(x),A=a(68),D=a.n(A),Q=a(69),R=a.n(Q),N=a(67),T=a.n(N),B=a(50),M=a.n(B),V=a(100),F=a.n(V),H=a(248),J=a.n(H),_=a(47),q=a(77),z=a(239),I=a(78),L=a(55),G=a(53),K={amount:{type:"number",default:0,startAdornment:y.a.createElement(F.a,{position:"start"},"\u20b9")},note:{type:"text",default:""},nextDueDate:{type:"date",default:Object(z.c)(),validate:function(e){return new Date(e).getTime()<=new Date(Object(z.c)()).getTime()?"Must be a future date":null}}},U=Object(d.withStyles)(G.b)(function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.state.open,a=this.props,n=a.classes,r=a.history,l=a.selected,i=a.negativeHandler,c=void 0===i?function(){return e.handleClose()}:i,u=a.positiveHandler,s=void 0===u?function(){return null}:u,d=a.postMutation,b=void 0===d?function(){return null}:d,m="Add Credit";return y.a.createElement("div",null,y.a.createElement(L.a,{mutation:q.l},function(a,i){var u=i.loading,d=i.error;i.data;return y.a.createElement(y.a.Fragment,null,y.a.createElement(M.a,{"aria-label":"Credit",title:"Credit",onClick:e.handleOpen},y.a.createElement(J.a,null)),t?y.a.createElement(C.a,{fullScreen:!1,open:t,onClose:c,"aria-labelledby":m,title:m},y.a.createElement(_.Form,{onSubmit:function(t){s(a,{data:t},l).then(function(t){b?(b(t),e.handleClose()):r.goBack()})}},y.a.createElement(T.a,{id:m},m),y.a.createElement(D.a,null,y.a.createElement(R.a,null,"Add credit amount to this property."),Object(I.b)(K)),y.a.createElement(k.a,null,u?y.a.createElement(w.a,{className:n.progress}):null,d?y.a.createElement(o.c,{error:!0},d.message):null,y.a.createElement(O.a,{onClick:c,color:"primary",autoFocus:!0},"Cancel"),y.a.createElement(O.a,{size:"large",type:"submit",disabled:u},"Confirm")))):null)}))}}]),t}(G.a)),W=a(240),X=a(54),Y=a(241),Z=a(142),$=a(76),ee=a(34),te=a(97),ae=a(63),ne=a(120),re=a(243),le=a(242);a.d(t,"propertyColumnData",function(){return ie}),a.d(t,"propertyExclude",function(){return ce});var ie=[{id:"createdAt",numeric:!1,disablePadding:!1,colSpan:1,label:"Created At"},{id:"name",numeric:!1,disablePadding:!1,colSpan:1,label:"Name"},{id:"location",numeric:!1,disablePadding:!1,colSpan:1,label:"Location"},{id:"price",numeric:!1,disablePadding:!1,colSpan:1,label:"Price (\u20b9)"},{id:"buyer",numeric:!1,disablePadding:!1,colSpan:1,label:"Bought By"},{id:"buyerNumber",numeric:!1,disablePadding:!1,colSpan:1,label:"Buyer's Phone Number"},{id:"totalReceivedAmount",numeric:!1,disablePadding:!1,colSpan:1,label:"Total Received Amount (\u20b9)"},{id:"balance",numeric:!1,disablePadding:!1,colSpan:1,label:"Balance Amount (\u20b9)"},{id:"nextDueDate",numeric:!1,disablePadding:!1,colSpan:1,label:"Next Due Date"},{id:"note",numeric:!1,disablePadding:!1,colSpan:1,label:"Note"}],ce=["id","count","createdAt","updatedAt","__typename"],oe=function(e){var t=e.customRootClasses,a=e.title,n=e.loading,o=e.history,u=e.deleteProperties,s=e.wrapper,d=Object(c.a)(e,["customRootClasses","title","loading","history","deleteProperties","wrapper"]),b=s.tableMutation,p=s.tableQuery,f=s.defaultState,g=s.dataQuery,v=s.getQueryVariables;return y.a.createElement(Y.a,{tableMutation:b,tableQuery:p,defaultState:f,dataQuery:g,getQueryVariables:v},function(e,c,s){var b=s.loading,p=s.data,f=s.refetch,g=p[Object.keys(p)[0]];return y.a.createElement(W.a,Object.assign({},d,{loading:b||n,data:g,title:a,settings:e,count:g.length&&g[0].count||g.length,columnData:ie,customRootClasses:t,skipHistoryColumns:["type"],exclude:ce,historyable:ee.e,credit:y.a.createElement(U,Object.assign({},d,{positiveHandler:function(e,t,a){return e({variables:Object(i.a)({},t,{id:a})})}})),primaryButtonIcon:y.a.createElement(m.a,null),options:{onEdit:function(e){return o.push(ae.a.Property.update({id:e,edit:!0}))},onCredit:function(){var e=Object(l.a)(r.a.mark(function e(t,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({variables:a});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),onDelete:function(){var e=Object(l.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:t});case 2:return e.next=4,c({variables:te.a});case 4:f();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onAdd:function(){return o.push(ae.a.Property.create())}},render:Object(ne.b)({match:"totalReceivedAmount",renderValue:function(e){var t=e.key,a=e.value;if("nextDueDate"===t)return{value:Object(z.b)(a)};if("buyerNumber"===t)return{value:Object(re.a)(a)};var n=Object(ne.a)({key:t,value:a,skip:["buyerNumber"]});return Object(i.a)({},n,{value:String(a).length?n.value:"-"})}}),mutate:function(){var e=Object(l.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}))})},ue=Object(d.withStyles)(function(e){return Object(d.createStyles)({root:{width:"100%"},duePropertyRoot:{backgroundColor:"rgba(255, 0, 0, 0.1)"},fab:{position:"fixed",width:"4rem",bottom:2*e.spacing.unit,right:2*e.spacing.unit}})})(function(e){var t=e.classes,a=e.history,n=Object(c.a)(e,["classes","history"]);return y.a.createElement("div",null,y.a.createElement(s.a,{container:!0,className:t.root},y.a.createElement(s.a,{item:!0,xs:12},y.a.createElement(L.a,{mutation:q.f},function(e,r){var l=r.loading;return y.a.createElement(y.a.Fragment,null,y.a.createElement(X.a,{query:ee.f},function(e){e.loading;var t=e.data.propertyTotal;return y.a.createElement(o.g,{style:{padding:"2rem",margin:"1rem 0rem"}},y.a.createElement(s.a,{container:!0,spacing:16,justify:"space-between"},y.a.createElement(s.a,{item:!0},y.a.createElement(o.n,{variant:"h5",color:"primary"},"Total Price (\u20b9):"," ",Object(le.a)(t.price))),y.a.createElement(s.a,{item:!0},y.a.createElement(o.n,{variant:"h5"},"Total Received Amount (\u20b9):"," ",Object(le.a)(t.totalReceivedAmount))),y.a.createElement(s.a,{item:!0},y.a.createElement(o.n,{variant:"h5",color:t.balance<0?"primary":"secondary"},"Total Balance (\u20b9):"," ",Object(le.a)(t.balance)))))}),y.a.createElement(oe,Object.assign({},n,{customRootClasses:[t.duePropertyRoot],title:"Due Properties",loading:l,history:a,deleteProperties:e,wrapper:{tableMutation:Z.b,tableQuery:$.b,defaultState:te.a.duePropertyTable,dataQuery:ee.b,getQueryVariables:function(e){return{}}}})),y.a.createElement(oe,Object.assign({},n,{title:"Properties",loading:l,history:a,deleteProperties:e,wrapper:{tableMutation:Z.f,tableQuery:$.f,defaultState:te.a.propertyTable,dataQuery:ee.c,getQueryVariables:function(e){return{}}}})))}))))});t.default=ue}}]);
//# sourceMappingURL=15.a855b2d1.chunk.js.map
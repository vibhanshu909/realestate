{"version":3,"sources":["components/forms/Form.tsx","components/forms/CreateProperty.tsx"],"names":["Form","defaults","data","_this","this","result","Object","keys","forEach","e","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","type","default","getDate","Array","current","mapping","value","Boolean","Error","mergeData","_this2","_this$props$match$par","props","match","params","_this$props$match$par2","edit","restParams","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_this$props","query","_this$props$getQueryV","getQueryVariables","_ref","id","prevDefaults","skipOnUpdate","clientOnly","filter","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","_Query__WEBPACK_IMPORTED_MODULE_10__","variables","fetchPolicy","_ref2","loading","error","newDefaults","assign","children","Function","update","queryResult","PureComponent","BalaceAmountComponent","withFormState","values","formState","react__WEBPACK_IMPORTED_MODULE_9___default","style","toCurrency","price","totalReceivedAmount","name","required","location","startAdornment","_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_7___default","position","balanceAmount","min","buyer","buyerNumber","max","validate","val","String","length","nextDueDate","vals","console","log","Date","getTime","note","CreateProperty","_Form__WEBPACK_IMPORTED_MODULE_14__","PROPERTY","ldefaults","_FormGenerator__WEBPACK_IMPORTED_MODULE_15__","mutation","UPDATE_PROPERTY","CREATE_PROPERTY","title","submitText","mutateFunc","fn","rest","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/8.7301de03.chunk.js","sourcesContent":["import React, { PureComponent } from 'react'\nimport { getDate } from '../../utils/date'\nimport filter from '../../utils/filter'\nimport Query from '../Query'\n\ninterface IFormProps {\n  match?: any\n  query: string\n  defaults: any\n  skipOnUpdate?: string[]\n  clientOnly?: string[]\n}\n\nexport interface IProps {\n  match: any\n}\nclass Form extends PureComponent<IFormProps> {\n  mergeData(defaults: any, data: any) {\n    const result: any = {}\n    Object.keys(defaults).forEach(e => {\n      result[e] = { ...defaults[e] }\n      if (defaults[e].type === 'date') {\n        result[e].default = getDate(data[e])\n      } else if (defaults[e].default instanceof Array) {\n        result[e].current =\n          data[e] &&\n          (data[e][result[e].mapping && result[e].mapping.value] || data[e])\n      } else if (\n        typeof defaults[e].default === 'string' ||\n        typeof defaults[e].default === 'number'\n      ) {\n        result[e].default = data[e]\n      } else if (defaults[e].type === Boolean) {\n        result[e].default = data[e]\n      } else if (defaults[e].type === 'custom') {\n        // result[e].default = data[e]\n      } else if (defaults[e].default instanceof Object) {\n        result[e].default = { ...this.mergeData(defaults[e].default, data[e]) }\n      } else {\n        throw new Error('merge error')\n      }\n    })\n    return result\n  }\n  render() {\n    const { edit = false, ...restParams }: any = this.props.match.params\n    const {\n      query,\n      getQueryVariables = ({ id }: { id: string }) => ({ id }),\n      defaults: prevDefaults,\n      skipOnUpdate,\n      clientOnly,\n    }: any = this.props\n    let defaults = prevDefaults\n    if (edit === 'edit') {\n      defaults = filter(prevDefaults, skipOnUpdate)\n      return (\n        <Query\n          query={query}\n          variables={getQueryVariables(restParams)}\n          fetchPolicy='cache-and-network'\n        >\n          {({ loading, error, data }: IGraphqlData) => {\n            if (loading) {\n              return <span>loading...</span>\n            } else if (error) {\n              return <span>Error Occured!</span>\n            }\n            let newDefaults = this.mergeData(\n              filter(defaults, clientOnly),\n              data[Object.keys(data)[0]],\n            )\n            newDefaults = Object.assign(defaults, newDefaults)\n            return (\n              this.props.children instanceof Function &&\n              this.props.children({\n                update: true,\n                defaults: newDefaults,\n                queryResult: data,\n              })\n            )\n          }}\n        </Query>\n      )\n    }\n    // else {\n    //   defaults = filter(defaults, clientOnly)\n    // }\n    return (\n      this.props.children instanceof Function &&\n      this.props.children({ update: false, defaults, queryResult: null })\n    )\n  }\n}\n\nexport default Form\n","import InputAdornment from '@material-ui/core/InputAdornment'\nimport { withFormState } from 'informed'\nimport React, { PureComponent } from 'react'\nimport { CREATE_PROPERTY, UPDATE_PROPERTY } from '../../graphql/mutation/remote'\nimport { PROPERTY } from '../../graphql/query/remote'\nimport { getDate } from '../../utils/date'\nimport toCurrency from '../../utils/toCurrency'\nimport Form, { IProps } from './Form'\nimport FormGenerator from './FormGenerator'\n\nexport const BalaceAmountComponent = withFormState(((props: any) => {\n  const values = props.formState.values\n  return (\n    <p style={{}}>\n      <label>Balance Amount:</label>{' '}\n      {toCurrency(values.price - values.totalReceivedAmount)}\n    </p>\n  )\n}) as any)\n\nexport const defaults: IFormGenerator = {\n  name: {\n    type: 'text',\n    default: '',\n    required: true,\n  },\n  location: {\n    type: 'text',\n    default: '',\n    required: true,\n  },\n  price: {\n    type: 'number',\n    default: 0,\n    required: true,\n    startAdornment: <InputAdornment position='start'>₹</InputAdornment>,\n  },\n  balanceAmount: {\n    type: 'custom',\n    default: <BalaceAmountComponent />,\n  },\n  totalReceivedAmount: {\n    type: 'number',\n    default: 0,\n    required: true,\n    min: 0,\n    startAdornment: <InputAdornment position='start'>₹</InputAdornment>,\n  },\n  buyer: {\n    type: 'text',\n    default: '',\n  },\n  buyerNumber: {\n    type: 'number',\n    default: 0,\n    max: 9999999999,\n    required: true,\n    startAdornment: <InputAdornment position='start'>+91</InputAdornment>,\n    validate: (val: number) => {\n      if (val < 1) {\n        return null\n      }\n      return String(val).length !== 10 ? 'Invalid phone number' : null\n    },\n  },\n  nextDueDate: {\n    type: 'date',\n    default: ' ',\n    validate: (val: string | null, vals: any) => {\n      console.log('val in validate is ', val)\n      if (val === ' ' || val === null) {\n        return null\n      } else if (vals.totalReceivedAmount === vals.price) {\n        return null\n      } else if (new Date(val).getTime() <= new Date(getDate()).getTime()) {\n        return 'Must be a future date'\n      }\n      return null\n    },\n  },\n  note: {\n    type: 'text',\n    default: '',\n  },\n}\n\nclass CreateProperty extends PureComponent<IProps> {\n  render() {\n    const { id } = this.props.match.params\n    return (\n      <Form\n        {...this.props}\n        query={PROPERTY}\n        defaults={defaults}\n        skipOnUpdate={['price', 'totalReceivedAmount']}\n      >\n        {({ update, defaults: ldefaults, queryResult }: IFormProps) => {\n          return (\n            <FormGenerator\n              {...this.props}\n              defaults={ldefaults}\n              mutation={update ? UPDATE_PROPERTY : CREATE_PROPERTY}\n              title={!update ? 'Create a new property' : 'Update this property'}\n              submitText={!update ? 'Create Property' : 'Update Property'}\n              mutateFunc={(fn, data) => {\n                const { nextDueDate, ...rest } = data\n                return fn({\n                  variables: {\n                    id,\n                    data: {\n                      ...rest,\n                      nextDueDate: nextDueDate === ' ' ? null : nextDueDate,\n                    },\n                  },\n                })\n              }}\n            />\n          )\n        }}\n      </Form>\n    )\n  }\n}\n\nexport default CreateProperty\n"],"sourceRoot":""}
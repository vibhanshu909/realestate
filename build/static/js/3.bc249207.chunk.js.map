{"version":3,"sources":["pages/User.tsx","../node_modules/@material-ui/icons/PersonAdd.js"],"names":["userColumnData","id","numeric","disablePadding","colSpan","label","userExclude","User","withStyles","theme","createStyles","root","width","fab","position","bottom","spacing","unit","right","props","classes","history","restProps","Object","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__","userEntryTable","defaultState","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_3___default","container","className","item","xs","_components_TableWrapper__WEBPACK_IMPORTED_MODULE_19__","tableMutation","USER_ENTRY_TABLE","tableQuery","USER_ENTRY_TABLE_QUERY","dataQuery","USERS","tableSettings","lmutate","_ref","loading","data","refetch","_components_Mutation__WEBPACK_IMPORTED_MODULE_10__","mutation","DELETE_USERS","deleteUsers","_ref2","dloading","_components_Enhanced_Table_Table__WEBPACK_IMPORTED_MODULE_18__","assign","users","title","settings","count","length","columnData","exclude","historyable","USER_CREDIT_HISTORY","primaryButtonIcon","_material_ui_icons_PersonAdd__WEBPACK_IMPORTED_MODULE_5___default","menu","selected","_components_EnhancedMenu__WEBPACK_IMPORTED_MODULE_9__","options","lprops","_components_Dialogs_ChangePassword__WEBPACK_IMPORTED_MODULE_8__","reset","positiveHandler","fn","args","variables","filter","icon","_material_ui_icons_VpnKey__WEBPACK_IMPORTED_MODULE_6___default","content","tooltip","onCredit","_onCredit","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","stop","this","_x","_x2","apply","arguments","onDelete","_onDelete","_callee2","_context2","_x3","onAdd","push","Routes","create","onEdit","e","update","edit","render","commanRender","match","renderValue","_ref3","key","value","getContactJSX","RENDER_VALUE","mutate","_ref4","_callee3","_context3","_x4","_interopRequireDefault","__webpack_require__","defineProperty","exports","default","_react","_default","Fragment","fill","d"],"mappings":"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","file":"static/js/3.bc249207.chunk.js","sourcesContent":["import Grid from '@material-ui/core/Grid'\nimport {\n  createStyles,\n  Theme,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core/styles'\nimport PersonAdd from '@material-ui/icons/PersonAdd'\nimport VpnKey from '@material-ui/icons/VpnKey'\nimport React from 'react'\nimport ChangePassword from '../components/Dialogs/ChangePassword'\nimport EnhancedMenu, { CreateMenuItem } from '../components/EnhancedMenu'\nimport Mutation from '../components/Mutation'\nimport { defaultState } from '../graphql/resolvers'\nimport { Routes } from '../Router'\nimport filter from '../utils/filter'\n\nimport { USER_ENTRY_TABLE as USER_ENTRY_TABLE_QUERY } from '../graphql/query/local'\nimport { USER_CREDIT_HISTORY, USERS } from '../graphql/query/remote'\n\nimport { USER_ENTRY_TABLE } from '../graphql/mutation/local'\nimport { DELETE_USERS } from '../graphql/mutation/remote'\n\nimport EnhancedTable from '../components/Enhanced/Table/Table'\nimport TableWrapper from '../components/TableWrapper'\nimport commanRender, { RENDER_VALUE } from '../utils/commanRender'\nimport getContactJSX from '../utils/getContactJSX'\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n    },\n    fab: {\n      position: 'fixed',\n      width: '4rem',\n      bottom: theme.spacing.unit * 2,\n      right: theme.spacing.unit * 2,\n    },\n  })\n\nexport const userColumnData = [\n  {\n    id: 'createdAt',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Created At',\n  },\n  {\n    id: 'username',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Username',\n  },\n  {\n    id: 'stockPermission',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Stock Permission',\n  },\n  {\n    id: 'contact',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Phone Number',\n  },\n  {\n    id: 'siteCount',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Total Sites',\n  },\n  {\n    id: 'totalSitesCost',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Total Sites Cost (₹)',\n  },\n  {\n    id: 'totalReceivedAmount',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Total Received Amount (₹)',\n  },\n  {\n    id: 'spent',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Spent Amount (₹)',\n  },\n  {\n    id: 'balance',\n    numeric: false,\n    disablePadding: false,\n    colSpan: 1,\n    label: 'Balance Amount (₹)',\n  },\n]\nexport const userExclude = [\n  'id',\n  'count',\n  'sites',\n  'createdAt',\n  'updatedAt',\n  '__typename',\n]\n\ninterface IUserProps extends WithStyles<typeof styles> {\n  history?: any\n}\nconst User = withStyles(styles)((props: IUserProps) => {\n  const { classes, history, ...restProps } = props\n  const { userEntryTable } = defaultState\n  return (\n    <div>\n      <Grid container={true} className={classes.root}>\n        <Grid item={true} xs={12}>\n          <TableWrapper\n            tableMutation={USER_ENTRY_TABLE}\n            tableQuery={USER_ENTRY_TABLE_QUERY}\n            dataQuery={USERS}\n            defaultState={userEntryTable}\n          >\n            {(\n              tableSettings: typeof userEntryTable,\n              lmutate: Function,\n              { loading, data, refetch }: IGraphqlData,\n            ) => {\n              return (\n                <Mutation mutation={DELETE_USERS}>\n                  {(\n                    deleteUsers: Function,\n                    { loading: dloading }: IGraphqlData,\n                  ) => {\n                    return (\n                      <EnhancedTable\n                        {...restProps}\n                        loading={loading || dloading}\n                        data={data.users}\n                        title='Users'\n                        settings={tableSettings}\n                        count={\n                          (data.users.length && data.users[0].count) ||\n                          data.users.length\n                        }\n                        columnData={userColumnData}\n                        exclude={userExclude}\n                        historyable={USER_CREDIT_HISTORY}\n                        primaryButtonIcon={<PersonAdd />}\n                        menu={(selected: any) => {\n                          return selected.length === 1 ? (\n                            <EnhancedMenu\n                              options={[\n                                (lprops: any) => {\n                                  return (\n                                    <ChangePassword\n                                      {...lprops}\n                                      reset={true}\n                                      positiveHandler={(fn, args) => {\n                                        return fn({\n                                          variables: {\n                                            id: selected[0],\n                                            data: filter(args, [\n                                              'confirmNewPassword',\n                                            ]),\n                                          },\n                                        })\n                                      }}\n                                    >\n                                      <CreateMenuItem\n                                        {...lprops}\n                                        icon={<VpnKey />}\n                                        content='Reset Password'\n                                        tooltip='Reset Password'\n                                      />\n                                    </ChangePassword>\n                                  )\n                                },\n                              ]}\n                            />\n                          ) : null\n                        }}\n                        options={{\n                          onCredit: async (fn: Function, args: any) => {\n                            await fn({ variables: args })\n                            // refetch();\n                          },\n                          onDelete: async (args: any) => {\n                            await deleteUsers({ variables: args })\n                            await lmutate({\n                              variables: defaultState.userEntryTable,\n                            })\n                            refetch()\n                          },\n                          onAdd: () => history.push(Routes.User.create()),\n                          onEdit: (e: any) =>\n                            history.push(\n                              Routes.User.update({ id: e, edit: true }),\n                            ),\n                        }}\n                        render={commanRender({\n                          match: 'spent',\n                          renderValue: ({ key, value }: any) => {\n                            if (key === 'contact') {\n                              return { value: getContactJSX(value) }\n                            }\n                            return RENDER_VALUE({ key, value })\n                          },\n                        })}\n                        mutate={async args => {\n                          await lmutate({ variables: args })\n                          // refetch();\n                        }}\n                      />\n                    )\n                  }}\n                </Mutation>\n              )\n            }}\n          </TableWrapper>\n        </Grid>\n      </Grid>\n    </div>\n  )\n})\n\nexport default User\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}), _react.default.createElement(\"path\", {\n  d: \"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n})), 'PersonAdd');\n\nexports.default = _default;"],"sourceRoot":""}
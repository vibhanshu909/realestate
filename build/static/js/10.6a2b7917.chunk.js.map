{"version":3,"sources":["utils/date.tsx","components/forms/Form.tsx","components/forms/SiteEntry.tsx"],"names":["getDate","now","arguments","length","undefined","Date","y","getFullYear","m","getMonth","d","__webpack_require__","__webpack_exports__","args","toLocaleDateString","weekday","year","month","day","Form","defaults","data","_this","this","result","Object","keys","forEach","e","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","type","default","Array","current","mapping","value","Boolean","Error","mergeData","_this2","_this$props$match$par","props","match","params","_this$props$match$par2","edit","restParams","_home_vibhanshu_Documents_RealEstate_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_this$props","query","_this$props$getQueryV","getQueryVariables","_ref","id","prevDefaults","skipOnUpdate","filter","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","_Query__WEBPACK_IMPORTED_MODULE_8__","variables","fetchPolicy","_ref2","loading","error","newDefaults","console","log","children","Function","update","queryResult","PureComponent","CreateSiteEntry","repeater","quantity","required","cost","startAdornment","react__WEBPACK_IMPORTED_MODULE_5___default","_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_7___default","position","paid","mistri","labour","eit","morang","baalu","githi","cement","saria","dust","other","other2","label","createdAt","siteId","_Form__WEBPACK_IMPORTED_MODULE_8__","assign","SITE_ENTRY","_FormGenerator__WEBPACK_IMPORTED_MODULE_9__","mutation","UPDATE_SITE_ENTRY","CREATE_SITE_ENTRY","title","submitText","mutateFunc","fn"],"mappings":"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","file":"static/js/10.6a2b7917.chunk.js","sourcesContent":["export default function(args: any) {\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }\n    const lang = 'hi-IN'\n    return new Date(args).toLocaleDateString(lang, options)\n}\nexport function getDate(now = new Date()) {\n    now = new Date(now)\n    const y = now.getFullYear()\n    const m = now.getMonth() + 1\n    const d = now.getDate()\n    return y + '-' +\n        (m < 10 ? '0' + m : m) + '-' +\n        (d < 10 ? '0' + d : d)\n}\n","import React, { PureComponent } from 'react'\nimport Query from '../Query'\nimport filter from '../../utils/filter'\nimport { getDate } from '../../utils/date'\n\ninterface IFormProps {\n  match?: any,\n  query: string,\n  defaults: any,\n  skipOnUpdate?: string[]\n}\n\nexport interface IProps {\n  match: any\n}\nclass Form extends PureComponent<IFormProps> {\n  mergeData(defaults: any, data: any) {\n    const result: any = {}\n    Object.keys(defaults).forEach(e => {\n      result[e] = { ...defaults[e] }\n      if (defaults[e].type === 'date') {\n        result[e].default = getDate(data[e])\n      } else if (defaults[e].default instanceof Array) {\n        result[e].current = data[e] && (data[e][result[e].mapping && result[e].mapping.value] || data[e])\n      } else if (typeof (defaults[e].default) === 'string' || typeof (defaults[e].default) === 'number') {\n        result[e].default = data[e]\n      } else if (defaults[e].type === Boolean) {\n        result[e].default = data[e]\n      } else if (defaults[e].default instanceof Object) {\n        result[e].default = { ...this.mergeData(defaults[e].default, data[e]) }\n      } else {\n        throw new Error('merge error')\n      }\n    })\n    return result\n  }\n  render() {\n    const { edit = false, ...restParams }: any = this.props.match.params\n    const {\n      query,\n      getQueryVariables = ({ id }: { id: string }) => ({ id }),\n      defaults: prevDefaults,\n      skipOnUpdate,\n    }: any = this.props\n    let defaults = prevDefaults\n    if (edit === 'edit') {\n      defaults = filter(prevDefaults, skipOnUpdate)\n      return (\n        <Query query={query} variables={getQueryVariables(restParams)} fetchPolicy='cache-and-network'>\n          {({ loading, error, data }: IGraphqlData) => {\n            if (loading) {\n              return (<span>loading...</span>)\n            } else if (error) {\n              return (<span>Error Occured!</span>)\n            }\n            const newDefaults = this.mergeData(defaults, data[Object.keys(data)[0]])\n            console.log(newDefaults)\n            return (this.props.children instanceof Function) && this.props.children({ update: true, defaults: newDefaults, queryResult: data })\n          }}\n        </Query>\n      )\n    }\n    return (this.props.children instanceof Function) && this.props.children({ update: false, defaults, queryResult: null })\n  }\n}\n\nexport default Form\n","import React, { PureComponent } from 'react'\nimport { CREATE_SITE_ENTRY, UPDATE_SITE_ENTRY } from '../../graphql/mutation/remote'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport Form, { IProps } from './Form'\nimport FormGenerator from './FormGenerator'\nimport { SITE_ENTRY } from '../../graphql/query/remote'\nimport { getDate } from '../../utils/date'\n\n// const validate = key => (val, values) => {\n//     console.log(val, values);\n//     if(Number(values[key].quantity) + val < 0){\n//         return \"Invalid Input!\";\n//     }\n//     return null;\n// }\nclass CreateSiteEntry extends PureComponent<IProps> {\n    render() {\n        const repeater = {\n            quantity: {\n                type: 'number',\n                default: 0,\n                required: true,\n            },\n            cost: {\n                type: 'number',\n                default: 0,\n                required: true,\n                startAdornment: <InputAdornment position='start'>â‚¹</InputAdornment>,\n                // validate: validate(\"mistri\")\n            },\n            paid: {\n                type: Boolean,\n                default: false,\n                required: true,\n            },\n        }\n        const defaults = {\n            mistri: {\n                default: repeater,\n            },\n            labour: {\n                default: repeater,\n            },\n            eit: {\n                default: repeater,\n            },\n            morang: {\n                default: repeater,\n            },\n            baalu: {\n                default: repeater,\n            },\n            githi: {\n                default: repeater,\n            },\n            cement: {\n                default: repeater,\n            },\n            saria: {\n                default: repeater,\n            },\n            dust: {\n                default: repeater,\n            },\n            other: {\n                default: {\n                    quantity: {\n                        type: 'text',\n                        default: 'N/A',\n                        required: true,\n                    },\n                    cost: {\n                        type: 'number',\n                        default: 0,\n                        required: true,\n                    },\n                    paid: {\n                        type: Boolean,\n                        default: false,\n                        required: true,\n                    },\n                },\n            },\n            other2: {\n                label: 'other 2',\n                default: {\n                    quantity: {\n                        type: 'text',\n                        default: 'N/A',\n                        required: true,\n                    },\n                    cost: {\n                        type: 'number',\n                        default: 0,\n                        required: true,\n                    },\n                    paid: {\n                        type: Boolean,\n                        default: false,\n                        required: true,\n                    },\n                },\n            },\n            createdAt: {\n                type: 'date',\n                default: getDate(),\n            },\n        }\n        const { siteId, id } = this.props.match.params\n        return (\n            <Form\n                {...this.props}\n                query={SITE_ENTRY}\n                defaults={defaults}>\n                {({ update, defaults }: IFormProps) => {\n                    return (\n                        <FormGenerator\n                            {...this.props}\n                            defaults={defaults}\n                            mutation={update ? UPDATE_SITE_ENTRY : CREATE_SITE_ENTRY}\n                            title={!update ? 'Create a new entry' : 'Update this entry'}\n                            submitText={!update ? 'Create entry' : 'Update entry'}\n                            mutateFunc={(fn, data) => fn({ variables: { siteId, id, data } })}\n                        >\n                        </FormGenerator>\n                    )\n                }}\n            </Form>\n        )\n    }\n}\n\nexport default CreateSiteEntry\n"],"sourceRoot":""}